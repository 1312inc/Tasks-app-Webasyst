{strip}

{if $ui == '2.0'}
<style>
.t-content-wrapper {
    position: absolute;
    overflow-y: auto;
    top: 3.4rem;
    right: 1rem;
    bottom: 1rem;
    left: 1rem;
}
</style>

<div class="flexbox middle space-8 custom-p-16">
    <img src="/wa-apps/tasks/img/tasks24.png" width="24" height="24" alt="" /> 
    <div class="nowrap"><strong>{$title}</strong></div>
</div>

<div class="t-content-wrapper hide-scrollbar">
    {if !empty($stats)}
        <ul class="menu custom-m-0">
            {foreach $stats as $item}
                <li class="custom-mb-16">
                    <div class="flexbox middle space-8">
                        <i class="userpic userpic-32" style="background-image: url('{$item.contact.photo_url}')"></i>
                        <div class="wide">
                            <div class="flexbox custom-mb-8">
                                <span class="wide">{$item.contact.name|escape}</span>
                                <span class="flexbox space-8">
                                    {if $item.overdue_count}<div class="flexbox middle space-4"><i class="text-red fas fa-flag fa-xs"></i><span>{waLocale::format($item.overdue_count, 0)}</span></div>{/if}
                                    <span>{waLocale::format($item.total_count, 0)}</span>
                                </span>
                            </div>
                            <div class="progressbar">
                                <div class="progressbar-line-wrapper text-inside">
                                    <div class="progressbar-outer">
                                        <div class="progressbar-inner" style="width: {$item.total_loading}%;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
            {/foreach}
        </ul>
    {else}
        <div class="align-center custom-mt-40">
            <i class="fas fa-lock fa-xs" style="font-size: 4rem;color: #EEE;"></i>
            <div class="gray custom-mt-12">
                No actors
            </div>
        </div>
    {/if}
</div>

<script>
    (function () {
        setTimeout(function() {
            try {
                DashboardWidgets[{$widget_id}].renderWidget();
            } catch (e) { }
        }, 60 * 1000);
    })();
</script>

{else}
<style>{include file='../css/actors.css' inline}</style>

<div class="t-actors-widget-wrapper">
    <div class="text-wrapper">
        <h6 class="heading nowrap">{$title}</h6>

        <ul class="t-actors-list">
            {foreach $stats as $item}
                <li class="h-author-wrapper">
                    <div class="h-outer-chart" style="width: {$item.total_loading}%">
                        <div class="h-inner-chart" style="width: {$item.relative_overdue_loading}%"></div>
                    </div>
                    <div class="h-author">
                        <span class="h-icon" style="background-image: url('{$item.contact.photo_url}')"></span>
                        <span class="h-name">{$item.contact.name|escape}</span>
                        <span class="h-count">
                            {waLocale::format($item.total_count, 0)}{if $item.overdue_count}&nbsp;/&nbsp;<strong class="red">{waLocale::format($item.overdue_count, 0)}</strong>{/if}
                        </span>
                    </div>
                </li>
            {/foreach}
        </ul>

    </div>

    <script>
        (function ($) {
            $(function () {
                setTimeout(function() {
                    try {
                        DashboardWidgets[{$widget_id}].renderWidget();
                    } catch (e) { }
                }, 60 * 1000);
            });
        })(jQuery)
    </script>

</div>
{/if}

{/strip}
