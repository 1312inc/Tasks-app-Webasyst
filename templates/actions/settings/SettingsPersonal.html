{$wrapper_id = uniqid('t-settings-wrapper-')}

{include file="./SettingsPersonalHelpers.inc.html" inline}

<div class="article" id="{$wrapper_id}">
    <div class="article-body">

        <h1>[`My preferences`]</h1>

        <form action="?module=settingsPersonal&action=save" class="t-setting-form">
            <input type="hidden" name="settings[notification][]" value="">
            <div class="t-settings-fields fields">
                <div class="field-group">
                    <div class="field">
                        <div class="name">
                            [`Notifications`]
                        </div>
                        <div class="value">
                            <strong>[`Send me notification in case of`]</strong>
                            <ul class="menu">
                                {$_items = [
                                    'always' => '[`Any action`]',
                                    'assign' => '[`Assignment only`]',
                                    'off' => '[`Switch off`]'
                                ]}
                                {foreach $_items as $_id => $_label}
                                    <li>{action_li_item label=$_label id=$_id}</li>
                                {/foreach}
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="field-group">
                    <div class="field">
                        <div class="name">
                            [`Actions`]
                        </div>
                        <div class="value">
                            <strong>[`Notify me about next kind of tasks`]</strong>

                            <ul class="menu t-settings-list">
                                {$_items = [
                                    'assigned_to_me' => '[`Assigned to me`]',
                                    'created_by_me' => '[`Created by me`]',
                                    'favorites' => '[`Favorites`]',
                                    'project' => '[`Selected projects`]'
                                ]}
                                {foreach $_items as $_id => $_label}
                                    <li>
                                        {task_li_item label=$_label id=$_id}
                                        {if $_id == 'project'}
                                            {project_list}
                                        {/if}
                                    </li>
                                {/foreach}
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="field-group custom-mt-16">
                    <div class="field">
                        <div class="value submit t-settings-buttons">
                            <input type="submit" class="button" value="[`Save settings`]">
                            <i class="fas fa-spinner" style="margin-top: 6px; display: none;"></i>
                        </div>
                    </div>
                </div>
            </div>
        </form>

    </div>

    <script>
        (function ($) {
            new TasksSettingsPersonal({
                $wrapper: $('#{$wrapper_id}')
            });
        })(jQuery);
    </script>

</div>
