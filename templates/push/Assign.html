{if $to.id == $log.assigned_contact_id}
    {if $to.id == $task.create_contact_id}
        {sprintf('[`User %s sent you your task.`]', $from.name|escape)}
    {else}
        {sprintf('[`User %s sent you a task.`]', $from.name|escape)}
    {/if}
{else}
    {$_assigned_contact = $log.assigned_contact|default:null}
    {if $_assigned_contact}
        {sprintf('[`User %s sent a task to %s.`]', $from.name|escape, $_assigned_contact.name|escape)}
    {else}
        {sprintf('[`User %s sent a task to %s.`]', $from.name|escape, 'contact with id = '|cat:$assigned_contact.id)}
    {/if}
{/if}
